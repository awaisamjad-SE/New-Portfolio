{
	"info": {
		"_postman_id": "7b0dc746-828a-4510-9fff-b0a63422ae35",
		"name": "🏠 Hostel Management Backend",
		"description": "📘 Full-featured API Collection for Hostel Management System.\n\nIncludes admin, student, food items, daily meals and payments endpoints. Uses Bearer {{Token}} / {{student_Token}} authentication.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "38859193"
	},
	"item": [
		{
			"name": "🔐 Admin - Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Auto-save Token after Login (handles both legacy and new response shape)",
							"if (pm.response.code === 200) {",
							"  const res = pm.response.json();",
							"  const token = (res && res.data && res.data.token) || res.token || (res && res.data && res.data.user && res.data.user.token);",
							"  if (token) pm.environment.set('Token', token);",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"Admin@123\"\n}" },
				"url": { "raw": "{{base_url}}/admin/login", "host": ["{{base_url}}"], "path": ["admin", "login"] },
				"description": "Admin login to get a Bearer token (saved as {{Token}})."
			}
		},
		{
			"name": "🍱 DailyMeals - Send Monthly Reports (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"month\": \"2025-10\"\n}" },
				"url": { "raw": "{{base_url}}/dailymeals/send/monthly", "host": ["{{base_url}}"], "path": ["dailymeals", "send", "monthly"] },
				"description": "Trigger sending monthly meal reports to all students (main_admin only). Body: { month: 'YYYY-MM' }"
			}
		},
		{
			"name": "🍱 DailyMeals - Send Weekly Reports (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"startDate\": \"2025-10-20\"\n}" },
				"url": { "raw": "{{base_url}}/dailymeals/send/weekly", "host": ["{{base_url}}"], "path": ["dailymeals", "send", "weekly"] },
				"description": "Trigger sending weekly meal reports to all students (main_admin only). Body: { startDate: 'YYYY-MM-DD' }"
			}
		},
		{
			"name": "🧑‍💼 Admin - Create New Admin (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"admin_id\": \"ADM{{$randomInt}}\",\n  \"name\": \"{{$randomFirstName}} {{$randomLastName}}\",\n  \"email\": \"{{$randomEmail}}\",\n  \"password\": \"Secure@123\",\n  \"role\": \"admin\"\n}" },
				"url": { "raw": "{{base_url}}/admin/create", "host": ["{{base_url}}"], "path": ["admin", "create"] },
				"description": "Create admin (requires main_admin role). Optional role field may be 'admin' or 'main_admin'."
			}
		},
		{
			"name": "🧑‍💼 Admin - Get All Admins (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/admin/get", "host": ["{{base_url}}"], "path": ["admin", "get"] },
				"description": "List all admin accounts (requires admin role)."
			}
		},
		{
			"name": "🧑‍💼 Admin - Update (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PUT",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"name\": \"Updated Name\",\n  \"role\": \"admin\"\n}" },
				"url": { "raw": "{{base_url}}/admin/update/{{adminId}}", "host": ["{{base_url}}"], "path": ["admin", "update", "{{adminId}}"] },
				"description": "Update an admin (main_admin only). Use {{adminId}} variable."
			}
		},
		{
			"name": "🧑‍💼 Admin - Delete (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "DELETE",
				"url": { "raw": "{{base_url}}/admin/delete/{{adminId}}", "host": ["{{base_url}}"], "path": ["admin", "delete", "{{adminId}}"] },
				"description": "Delete an admin account (main_admin only)."
			}
		},
		{
			"name": "🎓 Student - Create (admin)",
			"event": [
				{
					"listen": "prerequest",
					"script": { "exec": ["const dept = ['CS','EE','ME','BME'][Math.floor(Math.random()*4)]; const id = `2022${dept}${Math.floor(100000+Math.random()*900000)}`; pm.variables.set('student_id', id); pm.variables.set('student_email', `s${id}@example.com`);"], "type": "text/javascript" }
				}
			],
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"student_id\": \"{{student_id}}\",\n  \"name\": \"{{$randomFirstName}} {{$randomLastName}}\",\n  \"email\": \"{{student_email}}\",\n  \"password\": \"Stud@123\",\n  \"department\": \"Computer Science\"\n}" },
				"url": { "raw": "{{base_url}}/students/create", "host": ["{{base_url}}"], "path": ["students", "create"] },
				"description": "Admin creates a new student."
			}
		},
		{
			"name": "🎓 Student - Login",
				"event": [
				{ "listen": "test", "script": { "exec": ["// Save student token (handles both legacy and new response shapes)", "if (pm.response.code === 200) { const res = pm.response.json(); const token = (res && res.data && res.data.token) || res.token || (res && res.data && res.data.user && res.data.user.token); if (token) pm.environment.set('student_Token', token); }"], "type": "text/javascript" } }
	  ],
			"request": {
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"email\": \"{{student_email}}\",\n  \"password\": \"Stud@123\"\n}" },
				"url": { "raw": "{{base_url}}/students/login", "host": ["{{base_url}}"], "path": ["students", "login"] }
			}
		},
		{
			"name": "🎓 Student - Get All Students (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/students/get", "host": ["{{base_url}}"], "path": ["students", "get"] }
			}
		},
		{
			"name": "🎓 Student - Get By ID (admin|student)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{student_Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/students/get/{{student_id}}", "host": ["{{base_url}}"], "path": ["students", "get", "{{student_id}}"] },
				"description": "Get a student by Mongo _id or student_id (self or admin)."
			}
		},
		{
			"name": "🎓 Student - Update (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PUT",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"name\": \"Updated Student\",\n  \"department\": \"Electronics\"\n}" },
				"url": { "raw": "{{base_url}}/students/update/{{studentMongoId}}", "host": ["{{base_url}}"], "path": ["students", "update", "{{studentMongoId}}"] }
			}
		},
		{
			"name": "🎓 Student - Patch Status (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PATCH",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"status\": \"active\"\n}" },
				"url": { "raw": "{{base_url}}/students/status/{{studentMongoId}}", "host": ["{{base_url}}"], "path": ["students", "status", "{{studentMongoId}}"] }
			}
		},
		{
			"name": "🎓 Student - Delete (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "DELETE",
				"url": { "raw": "{{base_url}}/students/delete/{{studentMongoId}}", "host": ["{{base_url}}"], "path": ["students", "delete", "{{studentMongoId}}"] }
			}
		},
		{
			"name": "🍛 FoodItems - Create (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"food_id\": \"F001\",\n  \"name\": \"Biryani\",\n  \"category\": \"Lunch\",\n  \"price\": 220\n}" },
				"url": { "raw": "{{base_url}}/fooditems/create", "host": ["{{base_url}}"], "path": ["fooditems", "create"] }
			}
		},
		{
			"name": "🍛 FoodItems - Get All (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/fooditems/get", "host": ["{{base_url}}"], "path": ["fooditems", "get"] }
			}
		},
		{
			"name": "🍛 FoodItems - Update (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PUT",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"price\": 250\n}" },
				"url": { "raw": "{{base_url}}/fooditems/update/{{foodId}}", "host": ["{{base_url}}"], "path": ["fooditems", "update", "{{foodId}}"] }
			}
		},
		{
			"name": "🍛 FoodItems - Delete (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "DELETE",
				"url": { "raw": "{{base_url}}/fooditems/delete/{{foodId}}", "host": ["{{base_url}}"], "path": ["fooditems", "delete", "{{foodId}}"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Add (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"student_id\": \"{{student_id}}\",\n  \"food_id\": \"F001\",\n  \"quantity\": 1,\n  \"date\": \"2025-10-01T00:00:00.000Z\"\n}" },
				"url": { "raw": "{{base_url}}/dailymeals/add", "host": ["{{base_url}}"], "path": ["dailymeals", "add"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Get All (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/dailymeals/get", "host": ["{{base_url}}"], "path": ["dailymeals", "get"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Get By Student (admin|student)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{student_Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/dailymeals/get/{{student_id}}", "host": ["{{base_url}}"], "path": ["dailymeals", "get", "{{student_id}}"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Update (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PUT",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"quantity\": 2\n}" },
				"url": { "raw": "{{base_url}}/dailymeals/update/{{dailyMealId}}", "host": ["{{base_url}}"], "path": ["dailymeals", "update", "{{dailyMealId}}"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Delete (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "DELETE",
				"url": { "raw": "{{base_url}}/dailymeals/delete/{{dailyMealId}}", "host": ["{{base_url}}"], "path": ["dailymeals", "delete", "{{dailyMealId}}"] }
			}
		},
		{
			"name": "🍱 DailyMeals - Monthly Summary (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/dailymeals/summary/2025-10", "host": ["{{base_url}}"], "path": ["dailymeals", "summary", "2025-10"] },
				"description": "Summary of meals for specified month (YYYY-MM)."
			}
		},
		{
			"name": "🍱 DailyMeals - Popular Foods (admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/dailymeals/popular/2025-10", "host": ["{{base_url}}"], "path": ["dailymeals", "popular", "2025-10"] }
			}
		},
		{
			"name": "💳 Payments - Generate (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"student_id\": \"{{student_id}}\",\n  \"month\": \"2025-10\"\n}" },
				"url": { "raw": "{{base_url}}/payments/generate", "host": ["{{base_url}}"], "path": ["payments", "generate"] },
				"description": "Generate payment for a student for a given month. Server computes total_food_price from daily meals if not supplied."
			}
		},
		{
			"name": "💳 Payments - Generate For All (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "POST",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"month\": \"2025-10\"\n}" },
				"url": { "raw": "{{base_url}}/payments/generate/all", "host": ["{{base_url}}"], "path": ["payments", "generate", "all"] }
			}
		},
		{
			"name": "💳 Payments - Get All (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/get", "host": ["{{base_url}}"], "path": ["payments", "get"] }
			}
		},
		{
			"name": "💳 Payments - Get By Student (admin|student)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{student_Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/get/{{student_id}}", "host": ["{{base_url}}"], "path": ["payments", "get", "{{student_id}}"] }
			}
		},
		{
			"name": "💳 Payments - Monthly Report (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/report/{{student_id}}/2025-10", "host": ["{{base_url}}"], "path": ["payments", "report", "{{student_id}}", "2025-10"] }
			}
		},
		{
			"name": "💳 Payments - Trend (admin|student)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{student_Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/trend/{{student_id}}", "host": ["{{base_url}}"], "path": ["payments", "trend", "{{student_id}}"] }
			}
		},
		{
			"name": "💳 Payments - Summary (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/summary", "host": ["{{base_url}}"], "path": ["payments", "summary"] }
			}
		},
		{
			"name": "💳 Payments - Mark Paid (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PATCH",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"payment_mode\": \"bank_transfer\",\n  \"payment_reference\": \"REF12345\"\n}" },
				"url": { "raw": "{{base_url}}/payments/pay/{{paymentId}}", "host": ["{{base_url}}"], "path": ["payments", "pay", "{{paymentId}}"] }
			}
		},
		{
			"name": "💳 Payments - Top Expenses (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "GET",
				"url": { "raw": "{{base_url}}/payments/top/2025-10", "host": ["{{base_url}}"], "path": ["payments", "top", "2025-10"] }
			}
		},
		{
			"name": "💳 Payments - Update (main_admin)",
			"request": {
				"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
				"method": "PUT",
				"header": [{ "key": "Content-Type", "value": "application/json" }],
				"body": { "mode": "raw", "raw": "{\n  \"variable_expenses\": 200\n}" },
				"url": { "raw": "{{base_url}}/payments/update/{{paymentId}}", "host": ["{{base_url}}"], "path": ["payments", "update", "{{paymentId}}"] }
			}
		},
		{
				"name": "🔔 Notifications - Get Logs (admin|main_admin)",
				"request": {
					"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
					"method": "GET",
					"url": { "raw": "{{base_url}}/notifications/logs?limit=20&page=1", "host": ["{{base_url}}"], "path": ["notifications", "logs"] },
					"description": "List notification logs. Query params: status=sent|error|pending, limit, page"
				}
			},
			{
				"name": "🔔 Notifications - Get Log By ID (admin|main_admin)",
				"request": {
					"auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{Token}}", "type": "string" }] },
					"method": "GET",
					"url": { "raw": "{{base_url}}/notifications/logs/{{logId}}", "host": ["{{base_url}}"], "path": ["notifications", "logs", "{{logId}}"] },
					"description": "Get a single notification log by its Mongo _id. Use {{logId}} variable from responses."
				}
			}
	],
	"variable": [
		{ "key": "base_url", "value": "https://seashell-app-fuu8e.ondigitalocean.app/" },
		{ "key": "Token", "value": "" },
		{ "key": "student_Token", "value": "" },
		{ "key": "local_url", "value": "", "type": "default" }
	]
}